<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å±±ä¸œçœæµ·äº‹å±€äººåŠ›èµ„æºåˆ†æç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .modal {
            display: none;
        }
        .modal.show {
            display: flex;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- å¤´éƒ¨ -->
    <div class="bg-blue-900 text-white p-6">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-3xl font-bold mb-2">æµ·äº‹å±€äººäº‹ç®¡ç†ç³»ç»Ÿ</h1>
            <p class="text-blue-100">Maritime Safety Administration Human Resource Management System</p>
        </div>
    </div>

    <div class="max-w-7xl mx-auto p-6">
        <!-- ç»Ÿè®¡å¡ç‰‡ -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex items-center">
                    <svg class="h-8 w-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">æ€»äººæ•°</p>
                        <p class="text-2xl font-semibold text-gray-900" id="totalCount">5</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex items-center">
                    <svg class="h-8 w-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">éƒ¨é—¨æ•°é‡</p>
                        <p class="text-2xl font-semibold text-gray-900" id="deptCount">5</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex items-center">
                    <svg class="h-8 w-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                    </svg>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">æŒè¯äººå‘˜</p>
                        <p class="text-2xl font-semibold text-gray-900" id="certCount">4</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex items-center">
                    <svg class="h-8 w-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">åœ¨èŒäººå‘˜</p>
                        <p class="text-2xl font-semibold text-gray-900" id="activeCount">5</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- æœç´¢å’Œç­›é€‰åŒºåŸŸ -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
                <div class="relative">
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="æœç´¢å§“åã€å·¥å·ã€éƒ¨é—¨ã€èŒä½..."
                        class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                </div>
                
                <select id="deptFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">æ‰€æœ‰éƒ¨é—¨</option>
                </select>
                
                <select id="posFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">æ‰€æœ‰èŒä½</option>
                </select>
                
                <select id="ageFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">å¹´é¾„èŒƒå›´</option>
                    <option value="25-30">25-30å²</option>
                    <option value="31-35">31-35å²</option>
                    <option value="36-40">36-40å²</option>
                    <option value="41-45">41-45å²</option>
                    <option value="46-50">46-50å²</option>
                </select>
                
                <select id="workYearFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">å·¥ä½œå¹´é™</option>
                    <option value="0-2">0-2å¹´</option>
                    <option value="3-5">3-5å¹´</option>
                    <option value="6-10">6-10å¹´</option>
                    <option value="11-15">11-15å¹´</option>
                    <option value="16+">16å¹´ä»¥ä¸Š</option>
                </select>
                
                <button onclick="showAddModal()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">
                    â• æ·»åŠ å‘˜å·¥
                </button>
            </div>
            
            <div class="flex justify-between items-center">
                <div class="flex space-x-2">
                    <button onclick="exportToCSV()" class="bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg flex-1">
                        ğŸ“¥ CSV
                    </button>
                    <button onclick="exportToExcel()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-2 rounded-lg flex-1">
                        ğŸ“Š Excel
                    </button>
                </div>
                
                <div class="flex space-x-2">
                    <button onclick="showPromotionAnalysis()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg">
                        ğŸ“ˆ æ™‹å‡åˆ†æ
                    </button>
                    <button onclick="showBulkActions()" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg">
                        ğŸ¯ æ‰¹é‡æ“ä½œ
                    </button>
                </div>
            </div>
        </div>

        <!-- å‘˜å·¥åˆ—è¡¨ -->
        <div class="bg-white rounded-lg shadow overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                <input type="checkbox" id="selectAll" onchange="toggleSelectAll()" class="mr-2">
                                å‘˜å·¥ä¿¡æ¯
                            </th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">éƒ¨é—¨èŒä½</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">å¹´é¾„</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">å·¥ä½œå¹´é™</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ç»©æ•ˆè¯„åˆ†</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">æ™‹å‡æ½œåŠ›</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">è”ç³»æ–¹å¼</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">çŠ¶æ€</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="employeeTable" class="bg-white divide-y divide-gray-200">
                        <!-- å‘˜å·¥æ•°æ®å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- æ·»åŠ å‘˜å·¥æ¨¡æ€æ¡† -->
    <div id="addModal" class="modal fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75" onclick="hideAddModal()"></div>
            <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full z-50 max-h-screen overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-lg font-medium text-gray-900">æ·»åŠ æ–°å‘˜å·¥</h3>
                </div>
                <div class="px-6 py-4 space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å§“å</label>
                            <input type="text" id="newName" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å·¥å·</label>
                            <input type="text" id="newEmpId" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æ€§åˆ«</label>
                            <select id="newGender" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="ç”·">ç”·</option>
                                <option value="å¥³">å¥³</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å¹´é¾„</label>
                            <input type="number" id="newAge" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">è–ªèµ„</label>
                            <input type="number" id="newSalary" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">éƒ¨é—¨</label>
                            <input type="text" id="newDept" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">èŒä½</label>
                            <input type="text" id="newPosition" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ç”µè¯</label>
                            <input type="text" id="newPhone" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">é‚®ç®±</label>
                            <input type="email" id="newEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                </div>
                <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                    <button onclick="hideAddModal()" class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg">å–æ¶ˆ</button>
                    <button onclick="addEmployee()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg">ğŸ’¾ ä¿å­˜</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ™‹å‡åˆ†ææ¨¡æ€æ¡† -->
    <div id="promotionModal" class="modal fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75" onclick="hidePromotionModal()"></div>
            <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full z-50 max-h-screen overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-900">æ™‹å‡åˆ†ææŠ¥å‘Š</h3>
                    <button onclick="hidePromotionModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="px-6 py-6" id="promotionAnalysisContent">
                    <!-- æ™‹å‡åˆ†æå†…å®¹å°†ç”±JavaScriptåŠ¨æ€å¡«å…… -->
                </div>
                <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                    <button onclick="exportPromotionReport()" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg">ğŸ“Š å¯¼å‡ºæŠ¥å‘Š</button>
                    <button onclick="hidePromotionModal()" class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg">å…³é—­</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æ‰¹é‡æ“ä½œæ¨¡æ€æ¡† -->
    <div id="bulkModal" class="modal fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75" onclick="hideBulkModal()"></div>
            <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full z-50">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-lg font-medium text-gray-900">æ‰¹é‡æ“ä½œ (<span id="selectedCount">0</span> äººå·²é€‰æ‹©)</h3>
                </div>
                <div class="px-6 py-4 space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="bulkUpdatePerformance()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">æ‰¹é‡æ›´æ–°ç»©æ•ˆ</button>
                        <button onclick="bulkUpdatePotential()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg">æ‰¹é‡è®¾ç½®æ™‹å‡æ½œåŠ›</button>
                        <button onclick="bulkExport()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg">å¯¼å‡ºé€‰ä¸­å‘˜å·¥</button>
                        <button onclick="generatePromotionList()" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg">ç”Ÿæˆæ™‹å‡åå•</button>
                    </div>
                </div>
                <div class="px-6 py-4 border-t border-gray-200 flex justify-end">
                    <button onclick="hideBulkModal()" class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg">å–æ¶ˆ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æŸ¥çœ‹å‘˜å·¥è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="viewModal" class="modal fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75" onclick="hideViewModal()"></div>
            <div class="bg-white rounded-lg shadow-xl max-w-3xl w-full z-50 max-h-screen overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-900">å‘˜å·¥è¯¦ç»†ä¿¡æ¯</h3>
                    <button onclick="hideViewModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="px-6 py-6" id="employeeDetails">
                    <!-- å‘˜å·¥è¯¦æƒ…å°†ç”±JavaScriptåŠ¨æ€å¡«å…… -->
                </div>
            </div>
        </div>
    </div>

    <!-- ç¼–è¾‘å‘˜å·¥æ¨¡æ€æ¡† -->
    <div id="editModal" class="modal fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75" onclick="hideEditModal()"></div>
            <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full z-50 max-h-screen overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-lg font-medium text-gray-900">ç¼–è¾‘å‘˜å·¥ä¿¡æ¯</h3>
                </div>
                <div class="px-6 py-4 space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å§“å</label>
                            <input type="text" id="editName" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å·¥å·</label>
                            <input type="text" id="editEmpId" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æ€§åˆ«</label>
                            <select id="editGender" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="ç”·">ç”·</option>
                                <option value="å¥³">å¥³</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å¹´é¾„</label>
                            <input type="number" id="editAge" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">è–ªèµ„</label>
                            <input type="number" id="editSalary" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">éƒ¨é—¨</label>
                            <input type="text" id="editDept" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">èŒä½</label>
                            <input type="text" id="editPosition" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ç”µè¯</label>
                            <input type="text" id="editPhone" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">é‚®ç®±</label>
                            <input type="email" id="editEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æ‰§ç…§ç±»å‹</label>
                            <input type="text" id="editLicenseType" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æ‰§ç…§åˆ°æœŸæ—¥</label>
                            <input type="text" id="editLicenseExpiry" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">çŠ¶æ€</label>
                        <select id="editStatus" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            <option value="åœ¨èŒ">åœ¨èŒ</option>
                            <option value="ç¦»èŒ">ç¦»èŒ</option>
                            <option value="ä¼‘å‡">ä¼‘å‡</option>
                        </select>
                    </div>
                </div>
                <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                    <button onclick="hideEditModal()" class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg">å–æ¶ˆ</button>
                    <button onclick="saveEditEmployee()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg">ğŸ’¾ ä¿å­˜</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å‘˜å·¥æ•°æ®
        let employees = [
            {
                id: 1, name: 'å¼ ä¼Ÿ', employeeId: 'MSA001', gender: 'ç”·', age: 35,
                department: 'èˆ¹èˆ¶ç›‘ç£å¤„', position: 'é«˜çº§èˆ¹èˆ¶æ£€æŸ¥å®˜', 
                hireDate: '2015-03-15',
                phone: '13800138001', email: 'zhangwei@msa.gov.cn',
                address: 'åŒ—äº¬å¸‚æµ·æ·€åŒºå¤å…´è·¯ç”²11å·',
                licenseType: 'ç”²ç±»èˆ¹é•¿', licenseExpiry: '2026-12-31', 
                certificates: ['èˆ¹èˆ¶æ£€æŸ¥å‘˜è¯ä¹¦', 'å›½é™…èˆ¹èˆ¶å®‰å…¨æ£€æŸ¥å‘˜è¯ä¹¦', 'PSCæ£€æŸ¥å‘˜è¯ä¹¦'],
                salary: 8500, status: 'åœ¨èŒ',
                performance: 88, promotionPotential: 'é«˜', education: 'æœ¬ç§‘', certCount: 3, lastPromotion: '2020-06-15'
            },
            {
                id: 2, name: 'æçº¢', employeeId: 'MSA002', gender: 'å¥³', age: 28,
                department: 'èˆªæµ·ä¿éšœå¤„', position: 'èˆªæ ‡ç®¡ç†å‘˜',
                hireDate: '2019-07-01',
                phone: '13800138002', email: 'lihong@msa.gov.cn',
                address: 'åŒ—äº¬å¸‚æœé˜³åŒºå»ºå›½é—¨å¤–å¤§è¡—1å·',
                licenseType: 'ä¹™ç±»å¤§å‰¯', licenseExpiry: '2025-06-30', 
                certificates: ['èˆªæ ‡æŠ€æœ¯å‘˜è¯ä¹¦', 'é›·è¾¾æ“ä½œå‘˜è¯ä¹¦'],
                salary: 6800, status: 'åœ¨èŒ',
                performance: 92, promotionPotential: 'é«˜', education: 'ç¡•å£«', certCount: 2, lastPromotion: '2022-01-10'
            },
            {
                id: 3, name: 'ç‹å¼º', employeeId: 'MSA003', gender: 'ç”·', age: 42,
                department: 'æ¸¯å£ç›‘ç£å¤„', position: 'æ¸¯å£å®‰å…¨ç›‘ç£å‘˜',
                hireDate: '2010-08-20',
                phone: '13800138003', email: 'wangqiang@msa.gov.cn',
                address: 'åŒ—äº¬å¸‚è¥¿åŸåŒºè¥¿ç›´é—¨å—å¤§è¡—1å·',
                licenseType: 'ç”²ç±»è½®æœºé•¿', licenseExpiry: '2024-11-15', 
                certificates: ['æ¸¯å£å®‰å…¨æ£€æŸ¥å‘˜è¯ä¹¦', 'PSCæ£€æŸ¥å‘˜è¯ä¹¦', 'å±é™©å“æ£€æŸ¥å‘˜è¯ä¹¦', 'èˆ¹èˆ¶ä¿å®‰å‘˜è¯ä¹¦'],
                salary: 9200, status: 'åœ¨èŒ',
                performance: 85, promotionPotential: 'ä¸­', education: 'æœ¬ç§‘', certCount: 4, lastPromotion: '2018-03-20'
            },
            {
                id: 4, name: 'é™ˆæ˜', employeeId: 'MSA004', gender: 'ç”·', age: 31,
                department: 'æ°´ä¸Šäº¤é€šç®¡ç†å¤„', position: 'VTSæ“ä½œå‘˜',
                hireDate: '2018-01-10',
                phone: '13800138004', email: 'chenming@msa.gov.cn',
                address: 'åŒ—äº¬å¸‚ä¸°å°åŒºå—ä¸‰ç¯è¥¿è·¯16å·',
                licenseType: 'ä¹™ç±»äºŒå‰¯', licenseExpiry: '2025-09-20', 
                certificates: ['VTSæ“ä½œå‘˜è¯ä¹¦', 'é›·è¾¾æ“ä½œå‘˜è¯ä¹¦', 'é€šä¿¡å‘˜è¯ä¹¦'],
                salary: 7200, status: 'åœ¨èŒ',
                performance: 90, promotionPotential: 'é«˜', education: 'æœ¬ç§‘', certCount: 3, lastPromotion: '2021-12-01'
            },
            {
                id: 5, name: 'åˆ˜å¨œ', employeeId: 'MSA005', gender: 'å¥³', age: 26,
                department: 'ç»¼åˆåŠå…¬å®¤', position: 'è¡Œæ”¿ä¸“å‘˜',
                hireDate: '2021-05-15',
                phone: '13800138005', email: 'liuna@msa.gov.cn',
                address: 'åŒ—äº¬å¸‚çŸ³æ™¯å±±åŒºçŸ³æ™¯å±±è·¯20å·',
                licenseType: 'æ— ', licenseExpiry: 'æ— ', 
                certificates: ['è¡Œæ”¿ç®¡ç†èµ„æ ¼è¯'],
                salary: 5500, status: 'åœ¨èŒ',
                performance: 78, promotionPotential: 'ä¸­', education: 'æœ¬ç§‘', certCount: 1, lastPromotion: null
            }
        ];

        let filteredEmployees = [...employees];

        // åˆå§‹åŒ–é¡µé¢
        function initPage() {
            renderEmployeeTable();
            updateFilters();
            updateStats();
        }

        // è·å–æ™‹å‡æ½œåŠ›é¢œè‰²
        function getPotentialColor(potential) {
            switch(potential) {
                case 'é«˜': return 'bg-red-100 text-red-800';
                case 'ä¸­': return 'bg-yellow-100 text-yellow-800';
                case 'ä½': return 'bg-gray-100 text-gray-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        // è®¡ç®—å·¥ä½œå¹´é™
        function calculateWorkYears(hireDate) {
            if (!hireDate) return 'æœªçŸ¥';
            const hire = new Date(hireDate);
            const now = new Date();
            const years = Math.floor((now - hire) / (1000 * 60 * 60 * 24 * 365.25));
            return years;
        }

        // æ¸²æŸ“å‘˜å·¥è¡¨æ ¼
        function renderEmployeeTable() {
            const tbody = document.getElementById('employeeTable');
            tbody.innerHTML = '';
            
            filteredEmployees.forEach(emp => {
                const workYears = calculateWorkYears(emp.hireDate);
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <input type="checkbox" class="employee-checkbox mr-3" value="${emp.id}">
                            <div class="h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium">
                                ${emp.name.charAt(0)}
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">${emp.name}</div>
                                <div class="text-sm text-gray-500">${emp.employeeId}</div>
                                <div class="text-sm text-gray-500">${emp.gender} | ${emp.education || 'æœªçŸ¥'}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${emp.department}</div>
                        <div class="text-sm text-gray-500">${emp.position}</div>
                        <div class="text-sm text-gray-500">å…¥èŒ: ${emp.hireDate || 'æœªçŸ¥'}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${emp.age}å²</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${workYears}å¹´</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="text-sm text-gray-900 mr-2">${emp.performance || 0}</div>
                            <div class="w-16 bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: ${emp.performance || 0}%"></div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPotentialColor(emp.promotionPotential)}">
                            ${emp.promotionPotential || 'å¾…è¯„ä¼°'}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${emp.phone}</div>
                        <div class="text-sm text-gray-500">${emp.email}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                            ${emp.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <div class="flex space-x-2">
                            <button onclick="viewEmployee(${emp.id})" class="text-blue-600 hover:text-blue-900" title="æŸ¥çœ‹è¯¦æƒ…">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                </svg>
                            </button>
                            <button onclick="editEmployee(${emp.id})" class="text-indigo-600 hover:text-indigo-900" title="ç¼–è¾‘ä¿¡æ¯">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button onclick="deleteEmployee(${emp.id})" class="text-red-600 hover:text-red-900" title="åˆ é™¤å‘˜å·¥">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // æ›´æ–°ç­›é€‰é€‰é¡¹
        function updateFilters() {
            const departments = [...new Set(employees.map(emp => emp.department))];
            const positions = [...new Set(employees.map(emp => emp.position))];
            
            const deptFilter = document.getElementById('deptFilter');
            const posFilter = document.getElementById('posFilter');
            
            deptFilter.innerHTML = '<option value="">æ‰€æœ‰éƒ¨é—¨</option>';
            departments.forEach(dept => {
                deptFilter.innerHTML += `<option value="${dept}">${dept}</option>`;
            });
            
            posFilter.innerHTML = '<option value="">æ‰€æœ‰èŒä½</option>';
            positions.forEach(pos => {
                posFilter.innerHTML += `<option value="${pos}">${pos}</option>`;
            });
        }

        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats() {
            document.getElementById('totalCount').textContent = employees.length;
            document.getElementById('deptCount').textContent = [...new Set(employees.map(emp => emp.department))].length;
            document.getElementById('certCount').textContent = employees.filter(emp => emp.licenseType !== 'æ— ').length;
            document.getElementById('activeCount').textContent = employees.filter(emp => emp.status === 'åœ¨èŒ').length;
        }

        // æœç´¢å’Œç­›é€‰
        function filterEmployees() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const dept = document.getElementById('deptFilter').value;
            const pos = document.getElementById('posFilter').value;
            const ageRange = document.getElementById('ageFilter').value;
            const workYearRange = document.getElementById('workYearFilter').value;
            
            filteredEmployees = employees.filter(emp => {
                const matchesSearch = emp.name.toLowerCase().includes(search) ||
                                    emp.employeeId.toLowerCase().includes(search) ||
                                    emp.department.toLowerCase().includes(search) ||
                                    emp.position.toLowerCase().includes(search);
                
                const matchesDept = !dept || emp.department === dept;
                const matchesPos = !pos || emp.position === pos;
                
                let matchesAge = true;
                if (ageRange) {
                    const [minAge, maxAge] = ageRange.split('-').map(Number);
                    matchesAge = emp.age >= minAge && (maxAge ? emp.age <= maxAge : true);
                }
                
                let matchesWorkYear = true;
                if (workYearRange) {
                    const workYears = calculateWorkYears(emp.hireDate);
                    if (workYearRange === '16+') {
                        matchesWorkYear = workYears >= 16;
                    } else {
                        const [minYear, maxYear] = workYearRange.split('-').map(Number);
                        matchesWorkYear = workYears >= minYear && workYears <= maxYear;
                    }
                }
                
                return matchesSearch && matchesDept && matchesPos && matchesAge && matchesWorkYear;
            });
            
            renderEmployeeTable();
        }

        // å…¨é€‰/å–æ¶ˆå…¨é€‰
        function toggleSelectAll() {
            const selectAll = document.getElementById('selectAll');
            const checkboxes = document.querySelectorAll('.employee-checkbox');
            checkboxes.forEach(cb => cb.checked = selectAll.checked);
            updateSelectedCount();
        }

        // æ›´æ–°é€‰ä¸­æ•°é‡
        function updateSelectedCount() {
            const selectedCount = document.querySelectorAll('.employee-checkbox:checked').length;
            const countElement = document.getElementById('selectedCount');
            if (countElement) {
                countElement.textContent = selectedCount;
            }
        }

        // æ˜¾ç¤ºæ™‹å‡åˆ†æ
        function showPromotionAnalysis() {
            generatePromotionAnalysis();
            document.getElementById('promotionModal').classList.add('show');
        }

        // éšè—æ™‹å‡åˆ†æ
        function hidePromotionModal() {
            document.getElementById('promotionModal').classList.remove('show');
        }

        // ç”Ÿæˆæ™‹å‡åˆ†ææŠ¥å‘Š
        function generatePromotionAnalysis() {
            const highPotential = employees.filter(emp => emp.promotionPotential === 'é«˜' && emp.performance >= 85);
            const readyForPromotion = employees.filter(emp => {
                const workYears = calculateWorkYears(emp.hireDate);
                const timeSinceLastPromotion = emp.lastPromotion ? 
                    Math.floor((new Date() - new Date(emp.lastPromotion)) / (1000 * 60 * 60 * 24 * 365.25)) : workYears;
                return emp.performance >= 80 && timeSinceLastPromotion >= 2 && emp.promotionPotential !== 'ä½';
            });

            const analysisContent = `
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-red-800">é«˜æ½œåŠ›äººå‘˜</h4>
                            <p class="text-2xl font-bold text-red-600">${highPotential.length}äºº</p>
                            <p class="text-sm text-red-600">ç»©æ•ˆâ‰¥85ï¼Œæ™‹å‡æ½œåŠ›é«˜</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800">é€‚åˆæ™‹å‡</h4>
                            <p class="text-2xl font-bold text-green-600">${readyForPromotion.length}äºº</p>
                            <p class="text-sm text-green-600">ç»¼åˆè¯„ä¼°é€‚åˆæ™‹å‡</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-800">å¹³å‡ç»©æ•ˆ</h4>
                            <p class="text-2xl font-bold text-blue-600">${(employees.reduce((sum, emp) => sum + emp.performance, 0) / employees.length).toFixed(1)}</p>
                            <p class="text-sm text-blue-600">å…¨å‘˜å¹³å‡åˆ†æ•°</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-medium text-gray-900 mb-3">é«˜æ½œåŠ›å‘˜å·¥åå•</h4>
                            <div class="space-y-2 max-h-40 overflow-y-auto">
                                ${highPotential.map(emp => `
                                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                        <span>${emp.name} - ${emp.position}</span>
                                        <span class="text-sm text-gray-500">${emp.performance}åˆ†</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <div>
                            <h4 class="text-lg font-medium text-gray-900 mb-3">å»ºè®®æ™‹å‡åå•</h4>
                            <div class="space-y-2 max-h-40 overflow-y-auto">
                                ${readyForPromotion.map(emp => {
                                    const timeSincePromotion = emp.lastPromotion ? 
                                        Math.floor((new Date() - new Date(emp.lastPromotion)) / (1000 * 60 * 60 * 24 * 365.25)) : 
                                        calculateWorkYears(emp.hireDate);
                                    return `
                                        <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                            <div>
                                                <div>${emp.name} - ${emp.position}</div>
                                                <div class="text-xs text-gray-500">ä¸Šæ¬¡æ™‹å‡: ${timeSincePromotion}å¹´å‰</div>
                                            </div>
                                            <span class="text-sm text-gray-500">${emp.performance}åˆ†</span>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="text-lg font-medium text-gray-900 mb-3">éƒ¨é—¨æ™‹å‡æ½œåŠ›åˆ†æ</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${[...new Set(employees.map(emp => emp.department))].map(dept => {
                                const deptEmps = employees.filter(emp => emp.department === dept);
                                const avgPerformance = (deptEmps.reduce((sum, emp) => sum + emp.performance, 0) / deptEmps.length).toFixed(1);
                                const highPotentialCount = deptEmps.filter(emp => emp.promotionPotential === 'é«˜').length;
                                return `
                                    <div class="border p-3 rounded-lg">
                                        <h5 class="font-medium">${dept}</h5>
                                        <div class="text-sm text-gray-600 mt-1">
                                            <div>å¹³å‡ç»©æ•ˆ: ${avgPerformance}åˆ†</div>
                                            <div>é«˜æ½œåŠ›äººå‘˜: ${highPotentialCount}äºº</div>
                                            <div>æ€»äººæ•°: ${deptEmps.length}äºº</div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('promotionAnalysisContent').innerHTML = analysisContent;
        }

        // æ˜¾ç¤ºæ‰¹é‡æ“ä½œ
        function showBulkActions() {
            updateSelectedCount();
            document.getElementById('bulkModal').classList.add('show');
        }

        // éšè—æ‰¹é‡æ“ä½œ
        function hideBulkModal() {
            document.getElementById('bulkModal').classList.remove('show');
        }

        // è·å–é€‰ä¸­çš„å‘˜å·¥
        function getSelectedEmployees() {
            const checkboxes = document.querySelectorAll('.employee-checkbox:checked');
            return Array.from(checkboxes).map(cb => parseInt(cb.value));
        }

        // æ‰¹é‡æ›´æ–°ç»©æ•ˆ
        function bulkUpdatePerformance() {
            const selectedIds = getSelectedEmployees();
            if (selectedIds.length === 0) {
                alert('è¯·å…ˆé€‰æ‹©å‘˜å·¥');
                return;
            }
            
            const newPerformance = prompt('è¯·è¾“å…¥æ–°çš„ç»©æ•ˆåˆ†æ•° (0-100):');
            if (newPerformance && !isNaN(newPerformance) && newPerformance >= 0 && newPerformance <= 100) {
                selectedIds.forEach(id => {
                    const empIndex = employees.findIndex(emp => emp.id === id);
                    if (empIndex !== -1) {
                        employees[empIndex].performance = parseInt(newPerformance);
                    }
                });
                filterEmployees();
                alert(`å·²æ›´æ–° ${selectedIds.length} åå‘˜å·¥çš„ç»©æ•ˆåˆ†æ•°`);
            }
        }

        // æ‰¹é‡è®¾ç½®æ™‹å‡æ½œåŠ›
        function bulkUpdatePotential() {
            const selectedIds = getSelectedEmployees();
            if (selectedIds.length === 0) {
                alert('è¯·å…ˆé€‰æ‹©å‘˜å·¥');
                return;
            }
            
            const newPotential = prompt('è¯·è¾“å…¥æ™‹å‡æ½œåŠ› (é«˜/ä¸­/ä½):');
            if (['é«˜', 'ä¸­', 'ä½'].includes(newPotential)) {
                selectedIds.forEach(id => {
                    const empIndex = employees.findIndex(emp => emp.id === id);
                    if (empIndex !== -1) {
                        employees[empIndex].promotionPotential = newPotential;
                    }
                });
                filterEmployees();
                alert(`å·²æ›´æ–° ${selectedIds.length} åå‘˜å·¥çš„æ™‹å‡æ½œåŠ›`);
            }
        }

        // å¯¼å‡ºé€‰ä¸­å‘˜å·¥
        function bulkExport() {
            const selectedIds = getSelectedEmployees();
            if (selectedIds.length === 0) {
                alert('è¯·å…ˆé€‰æ‹©å‘˜å·¥');
                return;
            }
            
            const selectedEmployees = employees.filter(emp => selectedIds.includes(emp.id));
            const originalFiltered = filteredEmployees;
            filteredEmployees = selectedEmployees;
            exportToCSV();
            filteredEmployees = originalFiltered;
        }

        // ç”Ÿæˆæ™‹å‡åå•
        function generatePromotionList() {
            const selectedIds = getSelectedEmployees();
            if (selectedIds.length === 0) {
                alert('è¯·å…ˆé€‰æ‹©å‘˜å·¥');
                return;
            }
            
            const selectedEmployees = employees.filter(emp => selectedIds.includes(emp.id));
            const promotionList = selectedEmployees.map(emp => ({
                å§“å: emp.name,
                å·¥å·: emp.employeeId,
                éƒ¨é—¨: emp.department,
                ç°èŒä½: emp.position,
                ç»©æ•ˆåˆ†æ•°: emp.performance,
                æ™‹å‡æ½œåŠ›: emp.promotionPotential,
                å·¥ä½œå¹´é™: calculateWorkYears(emp.hireDate) + 'å¹´',
                æ¨èç†ç”±: emp.performance >= 85 ? 'ç»©æ•ˆä¼˜å¼‚' : emp.promotionPotential === 'é«˜' ? 'æ™‹å‡æ½œåŠ›é«˜' : 'ç»¼åˆè¡¨ç°è‰¯å¥½'
            }));
            
            const csvContent = [
                Object.keys(promotionList[0]),
                ...promotionList.map(emp => Object.values(emp))
            ].map(row => row.map(field => `"${field}"`).join(',')).join('\n');
            
            const blob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `æ™‹å‡æ¨èåå•_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert(`å·²ç”Ÿæˆ ${selectedEmployees.length} åå‘˜å·¥çš„æ™‹å‡æ¨èåå•`);
        }

        // å¯¼å‡ºæ™‹å‡æŠ¥å‘Š
        function exportPromotionReport() {
            generatePromotionAnalysis();
            alert('æ™‹å‡åˆ†ææŠ¥å‘ŠåŠŸèƒ½å¼€å‘ä¸­ï¼Œå½“å‰æ˜¾ç¤ºçš„åˆ†ææ•°æ®å¯é€šè¿‡æˆªå›¾ä¿å­˜');
        }

        // æ˜¾ç¤ºæ·»åŠ å‘˜å·¥æ¨¡æ€æ¡†
        function showAddModal() {
            document.getElementById('addModal').classList.add('show');
        }

        // éšè—æ·»åŠ å‘˜å·¥æ¨¡æ€æ¡†
        function hideAddModal() {
            document.getElementById('addModal').classList.remove('show');
            // æ¸…ç©ºè¡¨å•
            ['newName', 'newEmpId', 'newAge', 'newSalary', 'newDept', 'newPosition', 'newPhone', 'newEmail'].forEach(id => {
                document.getElementById(id).value = '';
            });
        }

        // æ·»åŠ å‘˜å·¥
        function addEmployee() {
            const newEmp = {
                id: Math.max(...employees.map(emp => emp.id)) + 1,
                name: document.getElementById('newName').value,
                employeeId: document.getElementById('newEmpId').value,
                gender: document.getElementById('newGender').value,
                age: parseInt(document.getElementById('newAge').value),
                department: document.getElementById('newDept').value,
                position: document.getElementById('newPosition').value,
                phone: document.getElementById('newPhone').value,
                email: document.getElementById('newEmail').value,
                licenseType: 'å¾…æ›´æ–°',
                licenseExpiry: 'å¾…æ›´æ–°',
                salary: parseInt(document.getElementById('newSalary').value),
                status: 'åœ¨èŒ'
            };
            
            if (newEmp.name && newEmp.employeeId) {
                employees.push(newEmp);
                filteredEmployees = [...employees];
                renderEmployeeTable();
                updateFilters();
                updateStats();
                hideAddModal();
                alert('å‘˜å·¥æ·»åŠ æˆåŠŸï¼');
            } else {
                alert('è¯·å¡«å†™å§“åå’Œå·¥å·ï¼');
            }
        }

        // åˆ é™¤å‘˜å·¥
        function deleteEmployee(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™åå‘˜å·¥å—ï¼Ÿ')) {
                employees = employees.filter(emp => emp.id !== id);
                filteredEmployees = [...employees];
                renderEmployeeTable();
                updateStats();
            }
        }

        // æŸ¥çœ‹å‘˜å·¥è¯¦æƒ…
        function viewEmployee(id) {
            const employee = employees.find(emp => emp.id === id);
            if (!employee) return;
            
            const detailsContent = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <h4 class="text-lg font-medium text-gray-900 border-b border-gray-200 pb-2">åŸºæœ¬ä¿¡æ¯</h4>
                        <div class="space-y-3">
                            <div><span class="text-sm font-medium text-gray-500">å§“å:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.name}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">å·¥å·:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.employeeId}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">æ€§åˆ«:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.gender}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">å¹´é¾„:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.age}å²</span></div>
                            <div><span class="text-sm font-medium text-gray-500">å­¦å†:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.education || 'æœªçŸ¥'}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">è–ªèµ„:</span>
                                <span class="ml-2 text-sm text-gray-900">Â¥${employee.salary}</span></div>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <h4 class="text-lg font-medium text-gray-900 border-b border-gray-200 pb-2">å·¥ä½œä¿¡æ¯</h4>
                        <div class="space-y-3">
                            <div><span class="text-sm font-medium text-gray-500">éƒ¨é—¨:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.department}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">èŒä½:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.position}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">å…¥èŒæ—¥æœŸ:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.hireDate || 'æœªçŸ¥'}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">å·¥ä½œå¹´é™:</span>
                                <span class="ml-2 text-sm text-gray-900">${calculateWorkYears(employee.hireDate)}å¹´</span></div>
                            <div><span class="text-sm font-medium text-gray-500">çŠ¶æ€:</span>
                                <span class="ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">${employee.status}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">ç»©æ•ˆè¯„åˆ†:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.performance || 0}åˆ†</span></div>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <h4 class="text-lg font-medium text-gray-900 border-b border-gray-200 pb-2">è”ç³»ä¿¡æ¯</h4>
                        <div class="space-y-3">
                            <div><span class="text-sm font-medium text-gray-500">ç”µè¯:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.phone}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">é‚®ç®±:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.email}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">åœ°å€:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.address || 'æœªå¡«å†™'}</span></div>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <h4 class="text-lg font-medium text-gray-900 border-b border-gray-200 pb-2">ä¸“ä¸šèµ„è´¨</h4>
                        <div class="space-y-3">
                            <div><span class="text-sm font-medium text-gray-500">æ‰§ç…§ç±»å‹:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.licenseType}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">æ‰§ç…§åˆ°æœŸæ—¥:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.licenseExpiry}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">æ™‹å‡æ½œåŠ›:</span>
                                <span class="ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPotentialColor(employee.promotionPotential)}">${employee.promotionPotential || 'å¾…è¯„ä¼°'}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">è¯ä¹¦:</span>
                                <div class="mt-1 flex flex-wrap gap-1">
                                    ${employee.certificates && employee.certificates.length > 0 ? 
                                        employee.certificates.map(cert => 
                                            `<span class="inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full">${cert}</span>`
                                        ).join('') : 
                                        '<span class="text-sm text-gray-400">æš‚æ— è¯ä¹¦</span>'
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('employeeDetails').innerHTML = detailsContent;
            document.getElementById('viewModal').classList.add('show');
        }

        // éšè—æŸ¥çœ‹æ¨¡æ€æ¡†
        function hideViewModal() {
            document.getElementById('viewModal').classList.remove('show');
        }

        // ç¼–è¾‘å‘˜å·¥
        let editingEmployeeId = null;
        
        function editEmployee(id) {
            const employee = employees.find(emp => emp.id === id);
            if (!employee) return;
            
            editingEmployeeId = id;
            
            // å¡«å……ç¼–è¾‘è¡¨å•
            document.getElementById('editName').value = employee.name;
            document.getElementById('editEmpId').value = employee.employeeId;
            document.getElementById('editGender').value = employee.gender;
            document.getElementById('editAge').value = employee.age;
            document.getElementById('editSalary').value = employee.salary;
            document.getElementById('editDept').value = employee.department;
            document.getElementById('editPosition').value = employee.position;
            document.getElementById('editPhone').value = employee.phone;
            document.getElementById('editEmail').value = employee.email;
            document.getElementById('editLicenseType').value = employee.licenseType;
            document.getElementById('editLicenseExpiry').value = employee.licenseExpiry;
            document.getElementById('editStatus').value = employee.status;
            
            document.getElementById('editModal').classList.add('show');
        }

        // éšè—ç¼–è¾‘æ¨¡æ€æ¡†
        function hideEditModal() {
            document.getElementById('editModal').classList.remove('show');
            editingEmployeeId = null;
        }

        // ä¿å­˜ç¼–è¾‘çš„å‘˜å·¥
        function saveEditEmployee() {
            if (!editingEmployeeId) return;
            
            const empIndex = employees.findIndex(emp => emp.id === editingEmployeeId);
            if (empIndex === -1) return;
            
            // æ›´æ–°å‘˜å·¥ä¿¡æ¯
            employees[empIndex] = {
                ...employees[empIndex],
                name: document.getElementById('editName').value,
                employeeId: document.getElementById('editEmpId').value,
                gender: document.getElementById('editGender').value,
                age: parseInt(document.getElementById('editAge').value),
                salary: parseInt(document.getElementById('editSalary').value),
                department: document.getElementById('editDept').value,
                position: document.getElementById('editPosition').value,
                phone: document.getElementById('editPhone').value,
                email: document.getElementById('editEmail').value,
                licenseType: document.getElementById('editLicenseType').value,
                licenseExpiry: document.getElementById('editLicenseExpiry').value,
                status: document.getElementById('editStatus').value
            };
            
            filteredEmployees = [...employees];
            renderEmployeeTable();
            updateFilters();
            updateStats();
            hideEditModal();
            alert('å‘˜å·¥ä¿¡æ¯æ›´æ–°æˆåŠŸï¼');
        }

        // å¯¼å‡ºCSV
        function exportToCSV() {
            const headers = ['å§“å', 'å·¥å·', 'æ€§åˆ«', 'å¹´é¾„', 'éƒ¨é—¨', 'èŒä½', 'ç”µè¯', 'é‚®ç®±', 'æ‰§ç…§ç±»å‹', 'æ‰§ç…§åˆ°æœŸæ—¥', 'è–ªèµ„', 'çŠ¶æ€'];
            const csvData = filteredEmployees.map(emp => [
                emp.name, emp.employeeId, emp.gender, emp.age, emp.department, 
                emp.position, emp.phone, emp.email, emp.licenseType, 
                emp.licenseExpiry, emp.salary, emp.status
            ]);
            
            const csvContent = [headers, ...csvData]
                .map(row => row.map(field => `"${field}"`).join(','))
                .join('\\n');
            
            const blob = new Blob(['\\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `æµ·äº‹å±€å‘˜å·¥ä¿¡æ¯_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // å¯¼å‡ºExcel
        function exportToExcel() {
            alert('Excelå¯¼å‡ºåŠŸèƒ½éœ€è¦æ›´é«˜çº§çš„åº“æ”¯æŒï¼Œå»ºè®®ä½¿ç”¨CSVæ ¼å¼å¯¼å‡ºåç”¨Excelæ‰“å¼€');
        }

        // äº‹ä»¶ç›‘å¬
        document.getElementById('searchInput').addEventListener('input', filterEmployees);
        document.getElementById('deptFilter').addEventListener('change', filterEmployees);
        document.getElementById('posFilter').addEventListener('change', filterEmployees);
        document.getElementById('ageFilter').addEventListener('change', filterEmployees);
        document.getElementById('workYearFilter').addEventListener('change', filterEmployees);

        // ç›‘å¬å¤é€‰æ¡†å˜åŒ–
        document.addEventListener('change', function(e) {
            if (e.target.classList.contains('employee-checkbox')) {
                updateSelectedCount();
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>