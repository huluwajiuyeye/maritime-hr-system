<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êµ∑‰∫ãÂ±Ä‰∫∫‰∫ãÁÆ°ÁêÜÁ≥ªÁªü</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .modal {
            display: none;
        }
        .modal.show {
            display: flex;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Â§¥ÈÉ® -->
    <div class="bg-blue-900 text-white p-6">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-3xl font-bold mb-2">Êµ∑‰∫ãÂ±Ä‰∫∫‰∫ãÁÆ°ÁêÜÁ≥ªÁªü</h1>
            <p class="text-blue-100">Maritime Safety Administration Human Resource Management System</p>
        </div>
    </div>

    <div class="max-w-7xl mx-auto p-6">
        <!-- ÁªüËÆ°Âç°Áâá -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex items-center">
                    <svg class="h-8 w-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">ÊÄª‰∫∫Êï∞</p>
                        <p class="text-2xl font-semibold text-gray-900" id="totalCount">5</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex items-center">
                    <svg class="h-8 w-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">ÈÉ®Èó®Êï∞Èáè</p>
                        <p class="text-2xl font-semibold text-gray-900" id="deptCount">5</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex items-center">
                    <svg class="h-8 w-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                    </svg>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">ÊåÅËØÅ‰∫∫Âëò</p>
                        <p class="text-2xl font-semibold text-gray-900" id="certCount">4</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex items-center">
                    <svg class="h-8 w-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Âú®ËÅå‰∫∫Âëò</p>
                        <p class="text-2xl font-semibold text-gray-900" id="activeCount">5</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÊêúÁ¥¢ÂíåÁ≠õÈÄâÂå∫Âüü -->
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
                <div class="relative">
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="ÊêúÁ¥¢ÂßìÂêç„ÄÅÂ∑•Âè∑„ÄÅÈÉ®Èó®„ÄÅËÅå‰Ωç..."
                        class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                </div>
                
                <select id="deptFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">ÊâÄÊúâÈÉ®Èó®</option>
                </select>
                
                <select id="posFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">ÊâÄÊúâËÅå‰Ωç</option>
                </select>
                
                <select id="ageFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">Âπ¥ÈæÑËåÉÂõ¥</option>
                    <option value="25-30">25-30Â≤Å</option>
                    <option value="31-35">31-35Â≤Å</option>
                    <option value="36-40">36-40Â≤Å</option>
                    <option value="41-45">41-45Â≤Å</option>
                    <option value="46-50">46-50Â≤Å</option>
                </select>
                
                <select id="workYearFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">Â∑•‰ΩúÂπ¥Èôê</option>
                    <option value="0-2">0-2Âπ¥</option>
                    <option value="3-5">3-5Âπ¥</option>
                    <option value="6-10">6-10Âπ¥</option>
                    <option value="11-15">11-15Âπ¥</option>
                    <option value="16+">16Âπ¥‰ª•‰∏ä</option>
                </select>
                
                <button onclick="showAddModal()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">
                    ‚ûï Ê∑ªÂä†ÂëòÂ∑•
                </button>
            </div>
            
            <div class="flex justify-between items-center">
                <div class="flex space-x-2">
                    <button onclick="exportToCSV()" class="bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg flex-1">
                        üì• CSV
                    </button>
                    <button onclick="exportToExcel()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-2 rounded-lg flex-1">
                        üìä Excel
                    </button>
                </div>
                
                <div class="flex justify-between items-center">
                <div class="flex space-x-2">
                    <button onclick="exportToCSV()" class="bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg flex-1">
                        üì• CSV
                    </button>
                    <button onclick="exportToExcel()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-2 rounded-lg flex-1">
                        üìä Excel
                    </button>
                </div>
                
                <div class="flex space-x-2">
                    <button onclick="showPromotionAnalysis()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg">
                        üìà ÊôãÂçáÂàÜÊûê
                    </button>
                    <button onclick="showBulkActions()" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg">
                        üéØ ÊâπÈáèÊìç‰Ωú
                    </button>
                    <button onclick="resetToDefaultData()" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg">
                        üîÑ ÈáçÁΩÆÊï∞ÊçÆ
                    </button>
                </div>
            </div>
        </div>

        <!-- ÂëòÂ∑•ÂàóË°® -->
        <div class="bg-white rounded-lg shadow overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                <input type="checkbox" id="selectAll" onchange="toggleSelectAll()" class="mr-2">
                                ÂëòÂ∑•‰ø°ÊÅØ
                            </th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ÈÉ®Èó®ËÅå‰Ωç</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Âπ¥ÈæÑ</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Â∑•‰ΩúÂπ¥Èôê</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Áª©ÊïàËØÑÂàÜ</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ÊôãÂçáÊΩúÂäõ</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ËÅîÁ≥ªÊñπÂºè</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Áä∂ÊÄÅ</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Êìç‰Ωú</th>
                        </tr>
                    </thead>
                    <tbody id="employeeTable" class="bg-white divide-y divide-gray-200">
                        <!-- ÂëòÂ∑•Êï∞ÊçÆÂ∞ÜÁî±JavaScriptÂä®ÊÄÅÁîüÊàê -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Ê∑ªÂä†ÂëòÂ∑•Ê®°ÊÄÅÊ°Ü -->
    <div id="addModal" class="modal fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75" onclick="hideAddModal()"></div>
            <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full z-50 max-h-screen overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-lg font-medium text-gray-900">Ê∑ªÂä†Êñ∞ÂëòÂ∑•</h3>
                </div>
                <div class="px-6 py-4 space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÂßìÂêç</label>
                            <input type="text" id="newName" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Â∑•Âè∑</label>
                            <input type="text" id="newEmpId" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÊÄßÂà´</label>
                            <select id="newGender" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="Áî∑">Áî∑</option>
                                <option value="Â•≥">Â•≥</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Âπ¥ÈæÑ</label>
                            <input type="number" id="newAge" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ëñ™ËµÑ</label>
                            <input type="number" id="newSalary" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÈÉ®Èó®</label>
                            <input type="text" id="newDept" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ËÅå‰Ωç</label>
                            <input type="text" id="newPosition" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÁîµËØù</label>
                            <input type="text" id="newPhone" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÈÇÆÁÆ±</label>
                            <input type="email" id="newEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                </div>
                <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                    <button onclick="hideAddModal()" class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg">ÂèñÊ∂à</button>
                    <button onclick="addEmployee()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg">üíæ ‰øùÂ≠ò</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊôãÂçáÂàÜÊûêÊ®°ÊÄÅÊ°Ü -->
    <div id="promotionModal" class="modal fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75" onclick="hidePromotionModal()"></div>
            <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full z-50 max-h-screen overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-900">ÊôãÂçáÂàÜÊûêÊä•Âëä</h3>
                    <button onclick="hidePromotionModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="px-6 py-6" id="promotionAnalysisContent">
                    <!-- ÊôãÂçáÂàÜÊûêÂÜÖÂÆπÂ∞ÜÁî±JavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                </div>
                <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                    <button onclick="exportPromotionReport()" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg">üìä ÂØºÂá∫Êä•Âëä</button>
                    <button onclick="hidePromotionModal()" class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg">ÂÖ≥Èó≠</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊâπÈáèÊìç‰ΩúÊ®°ÊÄÅÊ°Ü -->
    <div id="bulkModal" class="modal fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75" onclick="hideBulkModal()"></div>
            <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full z-50">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-lg font-medium text-gray-900">ÊâπÈáèÊìç‰Ωú (<span id="selectedCount">0</span> ‰∫∫Â∑≤ÈÄâÊã©)</h3>
                </div>
                <div class="px-6 py-4 space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="bulkUpdatePerformance()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">ÊâπÈáèÊõ¥Êñ∞Áª©Êïà</button>
                        <button onclick="bulkUpdatePotential()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg">ÊâπÈáèËÆæÁΩÆÊôãÂçáÊΩúÂäõ</button>
                        <button onclick="bulkExport()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg">ÂØºÂá∫ÈÄâ‰∏≠ÂëòÂ∑•</button>
                        <button onclick="generatePromotionList()" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg">ÁîüÊàêÊôãÂçáÂêçÂçï</button>
                    </div>
                </div>
                <div class="px-6 py-4 border-t border-gray-200 flex justify-end">
                    <button onclick="hideBulkModal()" class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg">ÂèñÊ∂à</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Êü•ÁúãÂëòÂ∑•ËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü -->
    <div id="viewModal" class="modal fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75" onclick="hideViewModal()"></div>
            <div class="bg-white rounded-lg shadow-xl max-w-3xl w-full z-50 max-h-screen overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-900">ÂëòÂ∑•ËØ¶ÁªÜ‰ø°ÊÅØ</h3>
                    <button onclick="hideViewModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="px-6 py-6" id="employeeDetails">
                    <!-- ÂëòÂ∑•ËØ¶ÊÉÖÂ∞ÜÁî±JavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                </div>
            </div>
        </div>
    </div>

    <!-- ÁºñËæëÂëòÂ∑•Ê®°ÊÄÅÊ°Ü -->
    <div id="editModal" class="modal fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75" onclick="hideEditModal()"></div>
            <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full z-50 max-h-screen overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-lg font-medium text-gray-900">ÁºñËæëÂëòÂ∑•‰ø°ÊÅØ</h3>
                </div>
                <div class="px-6 py-4 space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÂßìÂêç</label>
                            <input type="text" id="editName" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Â∑•Âè∑</label>
                            <input type="text" id="editEmpId" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÊÄßÂà´</label>
                            <select id="editGender" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="Áî∑">Áî∑</option>
                                <option value="Â•≥">Â•≥</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Âπ¥ÈæÑ</label>
                            <input type="number" id="editAge" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Â≠¶ÂéÜ</label>
                            <select id="editEducation" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="È´ò‰∏≠">È´ò‰∏≠</option>
                                <option value="Â§ß‰∏ì">Â§ß‰∏ì</option>
                                <option value="Êú¨Áßë">Êú¨Áßë</option>
                                <option value="Á°ïÂ£´">Á°ïÂ£´</option>
                                <option value="ÂçöÂ£´">ÂçöÂ£´</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÈÉ®Èó®</label>
                            <input type="text" id="editDept" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ËÅå‰Ωç</label>
                            <input type="text" id="editPosition" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÂÖ•ËÅåÊó•Êúü</label>
                            <input type="date" id="editHireDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ëñ™ËµÑ</label>
                            <input type="number" id="editSalary" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Áª©ÊïàËØÑÂàÜ (0-100)</label>
                            <input type="number" id="editPerformance" min="0" max="100" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÊôãÂçáÊΩúÂäõ</label>
                            <select id="editPromotionPotential" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="È´ò">È´ò</option>
                                <option value="‰∏≠">‰∏≠</option>
                                <option value="‰Ωé">‰Ωé</option>
                                <option value="ÂæÖËØÑ‰º∞">ÂæÖËØÑ‰º∞</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÁîµËØù</label>
                            <input type="text" id="editPhone" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÈÇÆÁÆ±</label>
                            <input type="email" id="editEmail" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Âú∞ÂùÄ</label>
                        <input type="text" id="editAddress" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÊâßÁÖßÁ±ªÂûã</label>
                            <input type="text" id="editLicenseType" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ÊâßÁÖßÂà∞ÊúüÊó•</label>
                            <input type="text" id="editLicenseExpiry" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="Ê†ºÂºèÔºö2025-12-31 Êàñ Êó†">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ËØÅ‰π¶ (Áî®ÈÄóÂè∑ÂàÜÈöîÂ§ö‰∏™ËØÅ‰π¶)</label>
                        <textarea id="editCertificates" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="‰æãÂ¶ÇÔºöËàπËà∂Ê£ÄÊü•ÂëòËØÅ‰π¶,ÂõΩÈôÖËàπËà∂ÂÆâÂÖ®Ê£ÄÊü•ÂëòËØÅ‰π¶,PSCÊ£ÄÊü•ÂëòËØÅ‰π¶"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Áä∂ÊÄÅ</label>
                        <select id="editStatus" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            <option value="Âú®ËÅå">Âú®ËÅå</option>
                            <option value="Á¶ªËÅå">Á¶ªËÅå</option>
                            <option value="‰ºëÂÅá">‰ºëÂÅá</option>
                        </select>
                    </div>
                </div>
                <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                    <button onclick="hideEditModal()" class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg">ÂèñÊ∂à</button>
                    <button onclick="saveEditEmployee()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg">üíæ ‰øùÂ≠ò</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Êï∞ÊçÆÊåÅ‰πÖÂåñÁõ∏ÂÖ≥ÂáΩÊï∞
        function saveToLocalStorage() {
            try {
                localStorage.setItem('maritime_hr_employees', JSON.stringify(employees));
                console.log('Êï∞ÊçÆÂ∑≤‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®');
            } catch (error) {
                console.error('‰øùÂ≠òÊï∞ÊçÆÂ§±Ë¥•:', error);
            }
        }

        function loadFromLocalStorage() {
            try {
                const savedData = localStorage.getItem('maritime_hr_employees');
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    if (Array.isArray(parsedData) && parsedData.length > 0) {
                        employees = parsedData;
                        console.log('‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩ‰∫Ü', employees.length, 'Êù°ÂëòÂ∑•Êï∞ÊçÆ');
                        return true;
                    }
                }
                console.log('Êú™ÊâæÂà∞Êú¨Âú∞Â≠òÂÇ®Êï∞ÊçÆÔºå‰ΩøÁî®ÈªòËÆ§Êï∞ÊçÆ');
                return false;
            } catch (error) {
                console.error('Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•:', error);
                return false;
            }
        }

        function resetToDefaultData() {
            if (confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÊâÄÊúâÊï∞ÊçÆ‰∏∫ÂàùÂßãÁä∂ÊÄÅÂêóÔºüËøôÂ∞ÜÊ∏ÖÈô§ÊâÄÊúâÊÇ®Ê∑ªÂä†Âíå‰øÆÊîπÁöÑÂëòÂ∑•‰ø°ÊÅØÔºÅ')) {
                localStorage.removeItem('maritime_hr_employees');
                location.reload(); // ÈáçÊñ∞Âä†ËΩΩÈ°µÈù¢‰ª•‰ΩøÁî®ÈªòËÆ§Êï∞ÊçÆ
            }
        }

        // ÂëòÂ∑•Êï∞ÊçÆ - ÈªòËÆ§Êï∞ÊçÆ
        let defaultEmployees = [
            {
                id: 1, name: 'Âº†‰ºü', employeeId: 'MSA001', gender: 'Áî∑', age: 35,
                department: 'ËàπËà∂ÁõëÁù£Â§Ñ', position: 'È´òÁ∫ßËàπËà∂Ê£ÄÊü•ÂÆò', 
                hireDate: '2015-03-15',
                phone: '13800138001', email: 'zhangwei@msa.gov.cn',
                address: 'Âåó‰∫¨Â∏ÇÊµ∑Ê∑ÄÂå∫Â§çÂÖ¥Ë∑ØÁî≤11Âè∑',
                licenseType: 'Áî≤Á±ªËàπÈïø', licenseExpiry: '2026-12-31', 
                certificates: ['ËàπËà∂Ê£ÄÊü•ÂëòËØÅ‰π¶', 'ÂõΩÈôÖËàπËà∂ÂÆâÂÖ®Ê£ÄÊü•ÂëòËØÅ‰π¶', 'PSCÊ£ÄÊü•ÂëòËØÅ‰π¶'],
                salary: 8500, status: 'Âú®ËÅå',
                performance: 88, promotionPotential: 'È´ò', education: 'Êú¨Áßë', certCount: 3, lastPromotion: '2020-06-15'
            },
            {
                id: 2, name: 'ÊùéÁ∫¢', employeeId: 'MSA002', gender: 'Â•≥', age: 28,
                department: 'Ëà™Êµ∑‰øùÈöúÂ§Ñ', position: 'Ëà™Ê†áÁÆ°ÁêÜÂëò',
                hireDate: '2019-07-01',
                phone: '13800138002', email: 'lihong@msa.gov.cn',
                address: 'Âåó‰∫¨Â∏ÇÊúùÈò≥Âå∫Âª∫ÂõΩÈó®Â§ñÂ§ßË°ó1Âè∑',
                licenseType: '‰πôÁ±ªÂ§ßÂâØ', licenseExpiry: '2025-06-30', 
                certificates: ['Ëà™Ê†áÊäÄÊúØÂëòËØÅ‰π¶', 'Èõ∑ËææÊìç‰ΩúÂëòËØÅ‰π¶'],
                salary: 6800, status: 'Âú®ËÅå',
                performance: 92, promotionPotential: 'È´ò', education: 'Á°ïÂ£´', certCount: 2, lastPromotion: '2022-01-10'
            },
            {
                id: 3, name: 'ÁéãÂº∫', employeeId: 'MSA003', gender: 'Áî∑', age: 42,
                department: 'Ê∏ØÂè£ÁõëÁù£Â§Ñ', position: 'Ê∏ØÂè£ÂÆâÂÖ®ÁõëÁù£Âëò',
                hireDate: '2010-08-20',
                phone: '13800138003', email: 'wangqiang@msa.gov.cn',
                address: 'Âåó‰∫¨Â∏ÇË•øÂüéÂå∫Ë•øÁõ¥Èó®ÂçóÂ§ßË°ó1Âè∑',
                licenseType: 'Áî≤Á±ªËΩÆÊú∫Èïø', licenseExpiry: '2024-11-15', 
                certificates: ['Ê∏ØÂè£ÂÆâÂÖ®Ê£ÄÊü•ÂëòËØÅ‰π¶', 'PSCÊ£ÄÊü•ÂëòËØÅ‰π¶', 'Âç±Èô©ÂìÅÊ£ÄÊü•ÂëòËØÅ‰π¶', 'ËàπËà∂‰øùÂÆâÂëòËØÅ‰π¶'],
                salary: 9200, status: 'Âú®ËÅå',
                performance: 85, promotionPotential: '‰∏≠', education: 'Êú¨Áßë', certCount: 4, lastPromotion: '2018-03-20'
            },
            {
                id: 4, name: 'ÈôàÊòé', employeeId: 'MSA004', gender: 'Áî∑', age: 31,
                department: 'Ê∞¥‰∏ä‰∫§ÈÄöÁÆ°ÁêÜÂ§Ñ', position: 'VTSÊìç‰ΩúÂëò',
                hireDate: '2018-01-10',
                phone: '13800138004', email: 'chenming@msa.gov.cn',
                address: 'Âåó‰∫¨Â∏Ç‰∏∞Âè∞Âå∫Âçó‰∏âÁéØË•øË∑Ø16Âè∑',
                licenseType: '‰πôÁ±ª‰∫åÂâØ', licenseExpiry: '2025-09-20', 
                certificates: ['VTSÊìç‰ΩúÂëòËØÅ‰π¶', 'Èõ∑ËææÊìç‰ΩúÂëòËØÅ‰π¶', 'ÈÄö‰ø°ÂëòËØÅ‰π¶'],
                salary: 7200, status: 'Âú®ËÅå',
                performance: 90, promotionPotential: 'È´ò', education: 'Êú¨Áßë', certCount: 3, lastPromotion: '2021-12-01'
            },
            {
                id: 5, name: 'ÂàòÂ®ú', employeeId: 'MSA005', gender: 'Â•≥', age: 26,
                department: 'ÁªºÂêàÂäûÂÖ¨ÂÆ§', position: 'Ë°åÊîø‰∏ìÂëò',
                hireDate: '2021-05-15',
                phone: '13800138005', email: 'liuna@msa.gov.cn',
                address: 'Âåó‰∫¨Â∏ÇÁü≥ÊôØÂ±±Âå∫Áü≥ÊôØÂ±±Ë∑Ø20Âè∑',
                licenseType: 'Êó†', licenseExpiry: 'Êó†', 
                certificates: ['Ë°åÊîøÁÆ°ÁêÜËµÑÊ†ºËØÅ'],
                salary: 5500, status: 'Âú®ËÅå',
                performance: 78, promotionPotential: '‰∏≠', education: 'Êú¨Áßë', certCount: 1, lastPromotion: null
            }
        ];

        // ÂàùÂßãÂåñÂëòÂ∑•Êï∞ÊçÆ
        let employees = [];

        // È°µÈù¢Âä†ËΩΩÊó∂Â∞ùËØï‰ªélocalStorageÂä†ËΩΩÊï∞ÊçÆ
        if (!loadFromLocalStorage()) {
            employees = [...defaultEmployees]; // ‰ΩøÁî®ÈªòËÆ§Êï∞ÊçÆ
        }

        let filteredEmployees = [...employees];

        // ÂàùÂßãÂåñÈ°µÈù¢
        function initPage() {
            renderEmployeeTable();
            updateFilters();
            updateStats();
        }

        // Ëé∑ÂèñÊôãÂçáÊΩúÂäõÈ¢úËâ≤
        function getPotentialColor(potential) {
            switch(potential) {
                case 'È´ò': return 'bg-red-100 text-red-800';
                case '‰∏≠': return 'bg-yellow-100 text-yellow-800';
                case '‰Ωé': return 'bg-gray-100 text-gray-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        // ËÆ°ÁÆóÂ∑•‰ΩúÂπ¥Èôê
        function calculateWorkYears(hireDate) {
            if (!hireDate) return 'Êú™Áü•';
            const hire = new Date(hireDate);
            const now = new Date();
            const years = Math.floor((now - hire) / (1000 * 60 * 60 * 24 * 365.25));
            return years;
        }

        // Ê∏≤ÊüìÂëòÂ∑•Ë°®Ê†º
        function renderEmployeeTable() {
            const tbody = document.getElementById('employeeTable');
            tbody.innerHTML = '';
            
            filteredEmployees.forEach(emp => {
                const workYears = calculateWorkYears(emp.hireDate);
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <input type="checkbox" class="employee-checkbox mr-3" value="${emp.id}">
                            <div class="h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium">
                                ${emp.name.charAt(0)}
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">${emp.name}</div>
                                <div class="text-sm text-gray-500">${emp.employeeId}</div>
                                <div class="text-sm text-gray-500">${emp.gender} | ${emp.education || 'Êú™Áü•'}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${emp.department}</div>
                        <div class="text-sm text-gray-500">${emp.position}</div>
                        <div class="text-sm text-gray-500">ÂÖ•ËÅå: ${emp.hireDate || 'Êú™Áü•'}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${emp.age}Â≤Å</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${workYears}Âπ¥</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="text-sm text-gray-900 mr-2">${emp.performance || 0}</div>
                            <div class="w-16 bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: ${emp.performance || 0}%"></div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPotentialColor(emp.promotionPotential)}">
                            ${emp.promotionPotential || 'ÂæÖËØÑ‰º∞'}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${emp.phone}</div>
                        <div class="text-sm text-gray-500">${emp.email}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                            ${emp.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <div class="flex space-x-2">
                            <button onclick="viewEmployee(${emp.id})" class="text-blue-600 hover:text-blue-900" title="Êü•ÁúãËØ¶ÊÉÖ">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                </svg>
                            </button>
                            <button onclick="editEmployee(${emp.id})" class="text-indigo-600 hover:text-indigo-900" title="ÁºñËæë‰ø°ÊÅØ">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button onclick="deleteEmployee(${emp.id})" class="text-red-600 hover:text-red-900" title="Âà†Èô§ÂëòÂ∑•">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Êõ¥Êñ∞Á≠õÈÄâÈÄâÈ°π
        function updateFilters() {
            const departments = [...new Set(employees.map(emp => emp.department))];
            const positions = [...new Set(employees.map(emp => emp.position))];
            
            const deptFilter = document.getElementById('deptFilter');
            const posFilter = document.getElementById('posFilter');
            
            deptFilter.innerHTML = '<option value="">ÊâÄÊúâÈÉ®Èó®</option>';
            departments.forEach(dept => {
                deptFilter.innerHTML += `<option value="${dept}">${dept}</option>`;
            });
            
            posFilter.innerHTML = '<option value="">ÊâÄÊúâËÅå‰Ωç</option>';
            positions.forEach(pos => {
                posFilter.innerHTML += `<option value="${pos}">${pos}</option>`;
            });
        }

        // Êõ¥Êñ∞ÁªüËÆ°Êï∞ÊçÆ
        function updateStats() {
            document.getElementById('totalCount').textContent = employees.length;
            document.getElementById('deptCount').textContent = [...new Set(employees.map(emp => emp.department))].length;
            document.getElementById('certCount').textContent = employees.filter(emp => emp.licenseType !== 'Êó†').length;
            document.getElementById('activeCount').textContent = employees.filter(emp => emp.status === 'Âú®ËÅå').length;
        }

        // ÊêúÁ¥¢ÂíåÁ≠õÈÄâ
        function filterEmployees() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const dept = document.getElementById('deptFilter').value;
            const pos = document.getElementById('posFilter').value;
            const ageRange = document.getElementById('ageFilter').value;
            const workYearRange = document.getElementById('workYearFilter').value;
            
            filteredEmployees = employees.filter(emp => {
                const matchesSearch = emp.name.toLowerCase().includes(search) ||
                                    emp.employeeId.toLowerCase().includes(search) ||
                                    emp.department.toLowerCase().includes(search) ||
                                    emp.position.toLowerCase().includes(search);
                
                const matchesDept = !dept || emp.department === dept;
                const matchesPos = !pos || emp.position === pos;
                
                let matchesAge = true;
                if (ageRange) {
                    const [minAge, maxAge] = ageRange.split('-').map(Number);
                    matchesAge = emp.age >= minAge && (maxAge ? emp.age <= maxAge : true);
                }
                
                let matchesWorkYear = true;
                if (workYearRange) {
                    const workYears = calculateWorkYears(emp.hireDate);
                    if (workYearRange === '16+') {
                        matchesWorkYear = workYears >= 16;
                    } else {
                        const [minYear, maxYear] = workYearRange.split('-').map(Number);
                        matchesWorkYear = workYears >= minYear && workYears <= maxYear;
                    }
                }
                
                return matchesSearch && matchesDept && matchesPos && matchesAge && matchesWorkYear;
            });
            
            renderEmployeeTable();
        }

        // ÂÖ®ÈÄâ/ÂèñÊ∂àÂÖ®ÈÄâ
        function toggleSelectAll() {
            const selectAll = document.getElementById('selectAll');
            const checkboxes = document.querySelectorAll('.employee-checkbox');
            checkboxes.forEach(cb => cb.checked = selectAll.checked);
            updateSelectedCount();
        }

        // Êõ¥Êñ∞ÈÄâ‰∏≠Êï∞Èáè
        function updateSelectedCount() {
            const selectedCount = document.querySelectorAll('.employee-checkbox:checked').length;
            const countElement = document.getElementById('selectedCount');
            if (countElement) {
                countElement.textContent = selectedCount;
            }
        }

        // ÊòæÁ§∫ÊôãÂçáÂàÜÊûê
        function showPromotionAnalysis() {
            generatePromotionAnalysis();
            document.getElementById('promotionModal').classList.add('show');
        }

        // ÈöêËóèÊôãÂçáÂàÜÊûê
        function hidePromotionModal() {
            document.getElementById('promotionModal').classList.remove('show');
        }

        // ÁîüÊàêÊôãÂçáÂàÜÊûêÊä•Âëä
        function generatePromotionAnalysis() {
            const highPotential = employees.filter(emp => emp.promotionPotential === 'È´ò' && emp.performance >= 85);
            const readyForPromotion = employees.filter(emp => {
                const workYears = calculateWorkYears(emp.hireDate);
                const timeSinceLastPromotion = emp.lastPromotion ? 
                    Math.floor((new Date() - new Date(emp.lastPromotion)) / (1000 * 60 * 60 * 24 * 365.25)) : workYears;
                return emp.performance >= 80 && timeSinceLastPromotion >= 2 && emp.promotionPotential !== '‰Ωé';
            });

            const analysisContent = `
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-red-800">È´òÊΩúÂäõ‰∫∫Âëò</h4>
                            <p class="text-2xl font-bold text-red-600">${highPotential.length}‰∫∫</p>
                            <p class="text-sm text-red-600">Áª©Êïà‚â•85ÔºåÊôãÂçáÊΩúÂäõÈ´ò</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800">ÈÄÇÂêàÊôãÂçá</h4>
                            <p class="text-2xl font-bold text-green-600">${readyForPromotion.length}‰∫∫</p>
                            <p class="text-sm text-green-600">ÁªºÂêàËØÑ‰º∞ÈÄÇÂêàÊôãÂçá</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-800">Âπ≥ÂùáÁª©Êïà</h4>
                            <p class="text-2xl font-bold text-blue-600">${(employees.reduce((sum, emp) => sum + emp.performance, 0) / employees.length).toFixed(1)}</p>
                            <p class="text-sm text-blue-600">ÂÖ®ÂëòÂπ≥ÂùáÂàÜÊï∞</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-lg font-medium text-gray-900 mb-3">È´òÊΩúÂäõÂëòÂ∑•ÂêçÂçï</h4>
                            <div class="space-y-2 max-h-40 overflow-y-auto">
                                ${highPotential.map(emp => `
                                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                        <span>${emp.name} - ${emp.position}</span>
                                        <span class="text-sm text-gray-500">${emp.performance}ÂàÜ</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <div>
                            <h4 class="text-lg font-medium text-gray-900 mb-3">Âª∫ËÆÆÊôãÂçáÂêçÂçï</h4>
                            <div class="space-y-2 max-h-40 overflow-y-auto">
                                ${readyForPromotion.map(emp => {
                                    const timeSincePromotion = emp.lastPromotion ? 
                                        Math.floor((new Date() - new Date(emp.lastPromotion)) / (1000 * 60 * 60 * 24 * 365.25)) : 
                                        calculateWorkYears(emp.hireDate);
                                    return `
                                        <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                            <div>
                                                <div>${emp.name} - ${emp.position}</div>
                                                <div class="text-xs text-gray-500">‰∏äÊ¨°ÊôãÂçá: ${timeSincePromotion}Âπ¥Ââç</div>
                                            </div>
                                            <span class="text-sm text-gray-500">${emp.performance}ÂàÜ</span>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="text-lg font-medium text-gray-900 mb-3">ÈÉ®Èó®ÊôãÂçáÊΩúÂäõÂàÜÊûê</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${[...new Set(employees.map(emp => emp.department))].map(dept => {
                                const deptEmps = employees.filter(emp => emp.department === dept);
                                const avgPerformance = (deptEmps.reduce((sum, emp) => sum + emp.performance, 0) / deptEmps.length).toFixed(1);
                                const highPotentialCount = deptEmps.filter(emp => emp.promotionPotential === 'È´ò').length;
                                return `
                                    <div class="border p-3 rounded-lg">
                                        <h5 class="font-medium">${dept}</h5>
                                        <div class="text-sm text-gray-600 mt-1">
                                            <div>Âπ≥ÂùáÁª©Êïà: ${avgPerformance}ÂàÜ</div>
                                            <div>È´òÊΩúÂäõ‰∫∫Âëò: ${highPotentialCount}‰∫∫</div>
                                            <div>ÊÄª‰∫∫Êï∞: ${deptEmps.length}‰∫∫</div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('promotionAnalysisContent').innerHTML = analysisContent;
        }

        // ÊòæÁ§∫ÊâπÈáèÊìç‰Ωú
        function showBulkActions() {
            updateSelectedCount();
            document.getElementById('bulkModal').classList.add('show');
        }

        // ÈöêËóèÊâπÈáèÊìç‰Ωú
        function hideBulkModal() {
            document.getElementById('bulkModal').classList.remove('show');
        }

        // Ëé∑ÂèñÈÄâ‰∏≠ÁöÑÂëòÂ∑•
        function getSelectedEmployees() {
            const checkboxes = document.querySelectorAll('.employee-checkbox:checked');
            return Array.from(checkboxes).map(cb => parseInt(cb.value));
        }

        // ÊâπÈáèÊõ¥Êñ∞Áª©Êïà
        function bulkUpdatePerformance() {
            const selectedIds = getSelectedEmployees();
            if (selectedIds.length === 0) {
                alert('ËØ∑ÂÖàÈÄâÊã©ÂëòÂ∑•');
                return;
            }
            
            const newPerformance = prompt('ËØ∑ËæìÂÖ•Êñ∞ÁöÑÁª©ÊïàÂàÜÊï∞ (0-100):');
            if (newPerformance && !isNaN(newPerformance) && newPerformance >= 0 && newPerformance <= 100) {
                selectedIds.forEach(id => {
                    const empIndex = employees.findIndex(emp => emp.id === id);
                    if (empIndex !== -1) {
                        employees[empIndex].performance = parseInt(newPerformance);
                    }
                });
                saveToLocalStorage(); // ‰øùÂ≠òÊï∞ÊçÆ
                filterEmployees();
                alert(`Â∑≤Êõ¥Êñ∞ ${selectedIds.length} ÂêçÂëòÂ∑•ÁöÑÁª©ÊïàÂàÜÊï∞`);
            }
        }

        // ÊâπÈáèËÆæÁΩÆÊôãÂçáÊΩúÂäõ
        function bulkUpdatePotential() {
            const selectedIds = getSelectedEmployees();
            if (selectedIds.length === 0) {
                alert('ËØ∑ÂÖàÈÄâÊã©ÂëòÂ∑•');
                return;
            }
            
            const newPotential = prompt('ËØ∑ËæìÂÖ•ÊôãÂçáÊΩúÂäõ (È´ò/‰∏≠/‰Ωé):');
            if (['È´ò', '‰∏≠', '‰Ωé'].includes(newPotential)) {
                selectedIds.forEach(id => {
                    const empIndex = employees.findIndex(emp => emp.id === id);
                    if (empIndex !== -1) {
                        employees[empIndex].promotionPotential = newPotential;
                    }
                });
                saveToLocalStorage(); // ‰øùÂ≠òÊï∞ÊçÆ
                filterEmployees();
                alert(`Â∑≤Êõ¥Êñ∞ ${selectedIds.length} ÂêçÂëòÂ∑•ÁöÑÊôãÂçáÊΩúÂäõ`);
            }
        }

        // ÂØºÂá∫ÈÄâ‰∏≠ÂëòÂ∑•
        function bulkExport() {
            const selectedIds = getSelectedEmployees();
            if (selectedIds.length === 0) {
                alert('ËØ∑ÂÖàÈÄâÊã©ÂëòÂ∑•');
                return;
            }
            
            const selectedEmployees = employees.filter(emp => selectedIds.includes(emp.id));
            const originalFiltered = filteredEmployees;
            filteredEmployees = selectedEmployees;
            exportToCSV();
            filteredEmployees = originalFiltered;
        }

        // ÁîüÊàêÊôãÂçáÂêçÂçï
        function generatePromotionList() {
            const selectedIds = getSelectedEmployees();
            if (selectedIds.length === 0) {
                alert('ËØ∑ÂÖàÈÄâÊã©ÂëòÂ∑•');
                return;
            }
            
            const selectedEmployees = employees.filter(emp => selectedIds.includes(emp.id));
            const promotionList = selectedEmployees.map(emp => ({
                ÂßìÂêç: emp.name,
                Â∑•Âè∑: emp.employeeId,
                ÈÉ®Èó®: emp.department,
                Áé∞ËÅå‰Ωç: emp.position,
                Áª©ÊïàÂàÜÊï∞: emp.performance,
                ÊôãÂçáÊΩúÂäõ: emp.promotionPotential,
                Â∑•‰ΩúÂπ¥Èôê: calculateWorkYears(emp.hireDate) + 'Âπ¥',
                Êé®ËçêÁêÜÁî±: emp.performance >= 85 ? 'Áª©Êïà‰ºòÂºÇ' : emp.promotionPotential === 'È´ò' ? 'ÊôãÂçáÊΩúÂäõÈ´ò' : 'ÁªºÂêàË°®Áé∞ËâØÂ•Ω'
            }));
            
            const csvContent = [
                Object.keys(promotionList[0]),
                ...promotionList.map(emp => Object.values(emp))
            ].map(row => row.map(field => `"${field}"`).join(',')).join('\n');
            
            const blob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `ÊôãÂçáÊé®ËçêÂêçÂçï_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert(`Â∑≤ÁîüÊàê ${selectedEmployees.length} ÂêçÂëòÂ∑•ÁöÑÊôãÂçáÊé®ËçêÂêçÂçï`);
        }

        // ÂØºÂá∫ÊôãÂçáÊä•Âëä
        function exportPromotionReport() {
            generatePromotionAnalysis();
            alert('ÊôãÂçáÂàÜÊûêÊä•ÂëäÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÂΩìÂâçÊòæÁ§∫ÁöÑÂàÜÊûêÊï∞ÊçÆÂèØÈÄöËøáÊà™Âõæ‰øùÂ≠ò');
        }

        // ÊòæÁ§∫Ê∑ªÂä†ÂëòÂ∑•Ê®°ÊÄÅÊ°Ü
        function showAddModal() {
            document.getElementById('addModal').classList.add('show');
        }

        // ÈöêËóèÊ∑ªÂä†ÂëòÂ∑•Ê®°ÊÄÅÊ°Ü
        function hideAddModal() {
            document.getElementById('addModal').classList.remove('show');
            // Ê∏ÖÁ©∫Ë°®Âçï
            ['newName', 'newEmpId', 'newAge', 'newSalary', 'newDept', 'newPosition', 'newPhone', 'newEmail'].forEach(id => {
                document.getElementById(id).value = '';
            });
        }

        // Ê∑ªÂä†ÂëòÂ∑•
        function addEmployee() {
            const newEmp = {
                id: Math.max(...employees.map(emp => emp.id)) + 1,
                name: document.getElementById('newName').value,
                employeeId: document.getElementById('newEmpId').value,
                gender: document.getElementById('newGender').value,
                age: parseInt(document.getElementById('newAge').value),
                department: document.getElementById('newDept').value,
                position: document.getElementById('newPosition').value,
                phone: document.getElementById('newPhone').value,
                email: document.getElementById('newEmail').value,
                licenseType: 'ÂæÖÊõ¥Êñ∞',
                licenseExpiry: 'ÂæÖÊõ¥Êñ∞',
                salary: parseInt(document.getElementById('newSalary').value),
                status: 'Âú®ËÅå',
                hireDate: new Date().toISOString().split('T')[0],
                address: '',
                certificates: [],
                performance: 0,
                promotionPotential: 'ÂæÖËØÑ‰º∞',
                education: 'Êú¨Áßë',
                certCount: 0,
                lastPromotion: null
            };
            
            if (newEmp.name && newEmp.employeeId) {
                employees.push(newEmp);
                filteredEmployees = [...employees];
                saveToLocalStorage(); // ‰øùÂ≠òÊï∞ÊçÆ
                renderEmployeeTable();
                updateFilters();
                updateStats();
                hideAddModal();
                alert('ÂëòÂ∑•Ê∑ªÂä†ÊàêÂäüÔºÅ');
            } else {
                alert('ËØ∑Â°´ÂÜôÂßìÂêçÂíåÂ∑•Âè∑ÔºÅ');
            }
        }

        // Âà†Èô§ÂëòÂ∑•
        function deleteEmployee(id) {
            if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÂêçÂëòÂ∑•ÂêóÔºü')) {
                employees = employees.filter(emp => emp.id !== id);
                filteredEmployees = [...employees];
                saveToLocalStorage(); // ‰øùÂ≠òÊï∞ÊçÆ
                renderEmployeeTable();
                updateStats();
            }
        }

        // Êü•ÁúãÂëòÂ∑•ËØ¶ÊÉÖ
        function viewEmployee(id) {
            const employee = employees.find(emp => emp.id === id);
            if (!employee) return;
            
            const detailsContent = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <h4 class="text-lg font-medium text-gray-900 border-b border-gray-200 pb-2">Âü∫Êú¨‰ø°ÊÅØ</h4>
                        <div class="space-y-3">
                            <div><span class="text-sm font-medium text-gray-500">ÂßìÂêç:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.name}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">Â∑•Âè∑:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.employeeId}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">ÊÄßÂà´:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.gender}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">Âπ¥ÈæÑ:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.age}Â≤Å</span></div>
                            <div><span class="text-sm font-medium text-gray-500">Â≠¶ÂéÜ:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.education || 'Êú™Áü•'}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">Ëñ™ËµÑ:</span>
                                <span class="ml-2 text-sm text-gray-900">¬•${employee.salary}</span></div>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <h4 class="text-lg font-medium text-gray-900 border-b border-gray-200 pb-2">Â∑•‰Ωú‰ø°ÊÅØ</h4>
                        <div class="space-y-3">
                            <div><span class="text-sm font-medium text-gray-500">ÈÉ®Èó®:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.department}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">ËÅå‰Ωç:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.position}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">ÂÖ•ËÅåÊó•Êúü:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.hireDate || 'Êú™Áü•'}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">Â∑•‰ΩúÂπ¥Èôê:</span>
                                <span class="ml-2 text-sm text-gray-900">${calculateWorkYears(employee.hireDate)}Âπ¥</span></div>
                            <div><span class="text-sm font-medium text-gray-500">Áä∂ÊÄÅ:</span>
                                <span class="ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">${employee.status}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">Áª©ÊïàËØÑÂàÜ:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.performance || 0}ÂàÜ</span></div>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <h4 class="text-lg font-medium text-gray-900 border-b border-gray-200 pb-2">ËÅîÁ≥ª‰ø°ÊÅØ</h4>
                        <div class="space-y-3">
                            <div><span class="text-sm font-medium text-gray-500">ÁîµËØù:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.phone}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">ÈÇÆÁÆ±:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.email}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">Âú∞ÂùÄ:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.address || 'Êú™Â°´ÂÜô'}</span></div>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <h4 class="text-lg font-medium text-gray-900 border-b border-gray-200 pb-2">‰∏ì‰∏öËµÑË¥®</h4>
                        <div class="space-y-3">
                            <div><span class="text-sm font-medium text-gray-500">ÊâßÁÖßÁ±ªÂûã:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.licenseType}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">ÊâßÁÖßÂà∞ÊúüÊó•:</span>
                                <span class="ml-2 text-sm text-gray-900">${employee.licenseExpiry}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">ÊôãÂçáÊΩúÂäõ:</span>
                                <span class="ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPotentialColor(employee.promotionPotential)}">${employee.promotionPotential || 'ÂæÖËØÑ‰º∞'}</span></div>
                            <div><span class="text-sm font-medium text-gray-500">ËØÅ‰π¶:</span>
                                <div class="mt-1 flex flex-wrap gap-1">
                                    ${employee.certificates && employee.certificates.length > 0 ? 
                                        employee.certificates.map(cert => 
                                            `<span class="inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full">${cert}</span>`
                                        ).join('') : 
                                        '<span class="text-sm text-gray-400">ÊöÇÊó†ËØÅ‰π¶</span>'
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('employeeDetails').innerHTML = detailsContent;
            document.getElementById('viewModal').classList.add('show');
        }

        // ÈöêËóèÊü•ÁúãÊ®°ÊÄÅÊ°Ü
        function hideViewModal() {
            document.getElementById('viewModal').classList.remove('show');
        }

        // ÁºñËæëÂëòÂ∑•
        let editingEmployeeId = null;
        
        function editEmployee(id) {
            const employee = employees.find(emp => emp.id === id);
            if (!employee) return;
            
            editingEmployeeId = id;
            
            // Â°´ÂÖÖÁºñËæëË°®Âçï
            document.getElementById('editName').value = employee.name;
            document.getElementById('editEmpId').value = employee.employeeId;
            document.getElementById('editGender').value = employee.gender;
            document.getElementById('editAge').value = employee.age;
            document.getElementById('editEducation').value = employee.education || 'Êú¨Áßë';
            document.getElementById('editSalary').value = employee.salary;
            document.getElementById('editDept').value = employee.department;
            document.getElementById('editPosition').value = employee.position;
            document.getElementById('editHireDate').value = employee.hireDate || '';
            document.getElementById('editPerformance').value = employee.performance || 0;
            document.getElementById('editPromotionPotential').value = employee.promotionPotential || 'ÂæÖËØÑ‰º∞';
            document.getElementById('editPhone').value = employee.phone;
            document.getElementById('editEmail').value = employee.email;
            document.getElementById('editAddress').value = employee.address || '';
            document.getElementById('editLicenseType').value = employee.licenseType;
            document.getElementById('editLicenseExpiry').value = employee.licenseExpiry;
            document.getElementById('editCertificates').value = employee.certificates ? employee.certificates.join(',') : '';
            document.getElementById('editStatus').value = employee.status;
            
            document.getElementById('editModal').classList.add('show');
        }

        // ÈöêËóèÁºñËæëÊ®°ÊÄÅÊ°Ü
        function hideEditModal() {
            document.getElementById('editModal').classList.remove('show');
            editingEmployeeId = null;
        }

        // ‰øùÂ≠òÁºñËæëÁöÑÂëòÂ∑•
        function saveEditEmployee() {
            if (!editingEmployeeId) return;
            
            const empIndex = employees.findIndex(emp => emp.id === editingEmployeeId);
            if (empIndex === -1) return;
            
            // Â§ÑÁêÜËØÅ‰π¶Â≠óÊÆµ
            const certificatesInput = document.getElementById('editCertificates').value;
            const certificates = certificatesInput ? certificatesInput.split(',').map(cert => cert.trim()).filter(cert => cert !== '') : [];
            
            // Êõ¥Êñ∞ÂëòÂ∑•‰ø°ÊÅØ
            employees[empIndex] = {
                ...employees[empIndex],
                name: document.getElementById('editName').value,
                employeeId: document.getElementById('editEmpId').value,
                gender: document.getElementById('editGender').value,
                age: parseInt(document.getElementById('editAge').value),
                education: document.getElementById('editEducation').value,
                salary: parseInt(document.getElementById('editSalary').value),
                department: document.getElementById('editDept').value,
                position: document.getElementById('editPosition').value,
                hireDate: document.getElementById('editHireDate').value,
                performance: parseInt(document.getElementById('editPerformance').value) || 0,
                promotionPotential: document.getElementById('editPromotionPotential').value,
                phone: document.getElementById('editPhone').value,
                email: document.getElementById('editEmail').value,
                address: document.getElementById('editAddress').value,
                licenseType: document.getElementById('editLicenseType').value,
                licenseExpiry: document.getElementById('editLicenseExpiry').value,
                certificates: certificates,
                status: document.getElementById('editStatus').value
            };
            
            filteredEmployees = [...employees];
            saveToLocalStorage(); // ‰øùÂ≠òÊï∞ÊçÆ
            renderEmployeeTable();
            updateFilters();
            updateStats();
            hideEditModal();
            alert('ÂëòÂ∑•‰ø°ÊÅØÊõ¥Êñ∞ÊàêÂäüÔºÅ');
        }

        // ÂØºÂá∫CSV
        function exportToCSV() {
            const headers = ['ÂßìÂêç', 'Â∑•Âè∑', 'ÊÄßÂà´', 'Âπ¥ÈæÑ', 'ÈÉ®Èó®', 'ËÅå‰Ωç', 'ÁîµËØù', 'ÈÇÆÁÆ±', 'ÊâßÁÖßÁ±ªÂûã', 'ÊâßÁÖßÂà∞ÊúüÊó•', 'Ëñ™ËµÑ', 'Áä∂ÊÄÅ'];
            const csvData = filteredEmployees.map(emp => [
                emp.name, emp.employeeId, emp.gender, emp.age, emp.department, 
                emp.position, emp.phone, emp.email, emp.licenseType, 
                emp.licenseExpiry, emp.salary, emp.status
            ]);
            
            const csvContent = [headers, ...csvData]
                .map(row => row.map(field => `"${field}"`).join(','))
                .join('\\n');
            
            const blob = new Blob(['\\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `Êµ∑‰∫ãÂ±ÄÂëòÂ∑•‰ø°ÊÅØ_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // ÂØºÂá∫Excel
        function exportToExcel() {
            alert('ExcelÂØºÂá∫ÂäüËÉΩÈúÄË¶ÅÊõ¥È´òÁ∫ßÁöÑÂ∫ìÊîØÊåÅÔºåÂª∫ËÆÆ‰ΩøÁî®CSVÊ†ºÂºèÂØºÂá∫ÂêéÁî®ExcelÊâìÂºÄ');
        }

        // ‰∫ã‰ª∂ÁõëÂê¨
        document.getElementById('searchInput').addEventListener('input', filterEmployees);
        document.getElementById('deptFilter').addEventListener('change', filterEmployees);
        document.getElementById('posFilter').addEventListener('change', filterEmployees);
        document.getElementById('ageFilter').addEventListener('change', filterEmployees);
        document.getElementById('workYearFilter').addEventListener('change', filterEmployees);

        // ÁõëÂê¨Â§çÈÄâÊ°ÜÂèòÂåñ
        document.addEventListener('change', function(e) {
            if (e.target.classList.contains('employee-checkbox')) {
                updateSelectedCount();
            }
        });

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>
